# Flux XDR API å‚è€ƒæ–‡æ¡£

æœ¬ç›®å½•åŒ…å« Flux XDR å¹³å°çš„ API æ¥å£å‚è€ƒæ–‡æ¡£ã€‚

## ğŸ“š API æ–‡æ¡£åˆ—è¡¨

### å®‰å…¨äº‹ä»¶ç®¡ç†

| æ–‡ä»¶ | API ç«¯ç‚¹ | è¯´æ˜ |
|------|---------|------|
| æŸ¥è¯¢å®‰å…¨äº‹ä»¶åˆ—è¡¨.txt | `/api/xdr/v1/incidents/list` | æŸ¥è¯¢å®‰å…¨äº‹ä»¶åˆ—è¡¨ï¼Œæ”¯æŒå¤šç§è¿‡æ»¤æ¡ä»¶ |
| æ ¹æ®äº‹ä»¶uuIdè·å–ä¸¾è¯ä¿¡æ¯.txt | `/api/xdr/v1/incidents/:uuid/proof` | è·å–äº‹ä»¶çš„è¯¦ç»†ä¸¾è¯ä¿¡æ¯ï¼ˆæ—¶é—´çº¿ã€å‘Šè­¦ç­‰ï¼‰ |
| æ ¹æ®äº‹ä»¶uuIdè·å–äº‹ä»¶å¤–ç½‘ipå¤„ç½®å®ä½“.txt | `/api/xdr/v1/incidents/:uuid/entities/ip` | è·å–äº‹ä»¶å…³è”çš„å¤–ç½‘ IP å¤„ç½®å®ä½“ä¿¡æ¯ |
| æ‰¹é‡ä¿®æ”¹å®‰å…¨äº‹ä»¶å¤„ç½®æ¥å£.txt | `/api/xdr/v1/incidents/update-status` | æ‰¹é‡æ›´æ–°å®‰å…¨äº‹ä»¶çš„å¤„ç½®çŠ¶æ€ |

### IP å°ç¦ç®¡ç†

| æ–‡ä»¶ | API ç«¯ç‚¹ | è¯´æ˜ |
|------|---------|------|
| æŸ¥è¯¢å°ç¦è®¾å¤‡åˆ—è¡¨.txt | `/api/xdr/v1/device/blockdevice/list` | æŸ¥è¯¢å¯ç”¨äºå°ç¦çš„è®¾å¤‡åˆ—è¡¨ |
| æŸ¥è¯¢å°ç¦åœ°å€ç­–ç•¥åˆ—è¡¨.txt | `/api/xdr/v1/responses/blockiprule/network/list` | æŸ¥è¯¢å·²é…ç½®çš„ IP å°ç¦ç­–ç•¥ |
| æ–°å¢ç½‘ä¾§å°ç¦åœ°å€ç­–ç•¥.txt | `/api/xdr/v1/responses/blockiprule/network` | åˆ›å»ºæ–°çš„ç½‘ä¾§ IP å°ç¦ç­–ç•¥ |

### èµ„äº§ç®¡ç†

| æ–‡ä»¶ | API ç«¯ç‚¹ | è¯´æ˜ |
|------|---------|------|
| asset.txt | - | èµ„äº§ç®¡ç†ç›¸å…³ API æ–‡æ¡£ |

---

## ğŸ’¡ ä½¿ç”¨è¯´æ˜

### API è°ƒç”¨æµç¨‹

1. **è®¤è¯**ï¼šæ‰€æœ‰ API è°ƒç”¨éœ€è¦é€šè¿‡ AK/SK æˆ–è”åŠ¨ç è¿›è¡Œè®¤è¯
2. **ç­¾å**ï¼šä½¿ç”¨ `aksk_py3.py` SDK ç”Ÿæˆè¯·æ±‚ç­¾å
3. **å‘é€è¯·æ±‚**ï¼šé€šè¿‡ HTTP/HTTPS å‘é€ç­¾ååçš„è¯·æ±‚
4. **å¤„ç†å“åº”**ï¼šè§£æè¿”å›çš„ JSON æ•°æ®

### è®¤è¯æ–¹å¼

```python
# ä½¿ç”¨ SDK è¿›è¡Œè®¤è¯
from app.utils.sdk.aksk_py3 import Auth

auth = Auth(
    ak="your_access_key",
    sk="your_secret_key",
    auth_code="your_auth_code"
)

# ç”Ÿæˆç­¾åè¯·æ±‚
signed_request = auth.sign_request(
    method="POST",
    url="https://api.example.com/api/xdr/v1/incidents/list",
    body={...}
)
```

### å¸¸ç”¨å‚æ•°

#### æ—¶é—´æˆ³æ ¼å¼
- Unix æ—¶é—´æˆ³ï¼ˆç§’çº§ï¼‰
- ç¤ºä¾‹ï¼š`1704067200` è¡¨ç¤º 2024-01-01 00:00:00

#### äº‹ä»¶ç­‰çº§ (incidentSeverity)
- `0` - ä¿¡æ¯
- `1` - ä½å±
- `2` - ä¸­å±
- `3` - é«˜å±
- `4` - ä¸¥é‡

#### å¤„ç½®çŠ¶æ€ (dealStatus)
- `0` - å¾…å¤„ç½®
- `10` - å¤„ç½®ä¸­
- `30` - å·²é˜²æŠ¤
- `40` - å·²å¤„ç½®
- `50` - å·²æŒ‚èµ·
- `60` - æ¥å—é£é™©
- `70` - å·²éåˆ¶

#### æ•°æ®æº (dataSource)
- `EDR` - ç«¯ç‚¹æ£€æµ‹ä¸å“åº”
- `NDR` - ç½‘ç»œæ£€æµ‹ä¸å“åº”
- `CWPP` - äº‘å·¥ä½œè´Ÿè½½ä¿æŠ¤å¹³å°

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [FastAPI è‡ªåŠ¨ç”Ÿæˆçš„æ–‡æ¡£](http://localhost:8000/docs) - åç«¯ API äº¤äº’å¼æ–‡æ¡£
- [é¡¹ç›®ä¸» README](../../README.md) - é¡¹ç›®è¯´æ˜
- [å¼€å‘ç¬”è®°](../development-notes/) - é—®é¢˜æ’æŸ¥è®°å½•
